<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="index.css">
  <title>Document</title>
  <!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
  attribute vec2 a_position;
  attribute vec2 a_texCoord;
  
  uniform vec2 u_resolution;
  
  varying vec2 v_texCoord;
  
  void main() {
     // convert the rectangle from pixels to 0.0 to 1.0
     vec2 zeroToOne = a_position / u_resolution;
  
     // convert from 0->1 to 0->2
     vec2 zeroToTwo = zeroToOne * 2.0;
  
     // convert from 0->2 to -1->+1 (clipspace)
     vec2 clipSpace = zeroToTwo - 1.0;
  
     gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  
     // pass the texCoord to the fragment shader
     // The GPU will interpolate this value between points.
     v_texCoord = a_texCoord;
  }
  </script>
  <!-- fragment shader -->
  <script id="2d-fragment-shader" type="x-shader/x-fragment">
  precision mediump float;

  uniform sampler2D u_image;  
  uniform vec2 u_textureSize;
 
  varying vec2 v_texCoord;
  uniform float pixel_h;
  uniform float pixel_w;
 
  void main() {
    float dx = pixel_w*(1./u_textureSize.x);
    float dy = pixel_h*(1./u_textureSize.y);
    vec2 coord = vec2(dx*floor(v_texCoord.x/dx), dy*floor(v_texCoord.y/dy));
    
    gl_FragColor = texture2D(u_image, coord);
  }
  </script>

</head>
<body>
  <div class="wrapper">
    <h1>
      <!-- TODO: append span tag through javascript -->
      <span>P</span><span>I</span><span>X</span><span>E</span><span>L</span><span>A</span><span>T</span><span>E</span>
    </h1>
    
    <div class="menu-container">
      <div class="file-menu">
          <input id="fileInput" class="file-chooser" type='file' accept="image/*"/>
          <label for="fileInput" class="menu-button">Choose an image <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><style>.a{fill:#030104;}</style><polygon points="12.5 10 12.5 13 2.5 13 2.5 10 0.5 10 0.5 13 0.5 15 14.5 15 14.5 13 14.5 10 " class="a"/><polygon points="5.5 12 9.5 12 9.5 5 11.5 5 7.5 0 3.5 5 5.5 5 " class="a"/></svg>
          </label>
          <a id="saveLink" class="menu-button">Save File</a>
      </div>

      <div class="config-menu">
          <div class="config-menu__area1">
              <label for="propBox">Lock ratio</label><input type="checkbox" value="prop" id="propBox">
          </div>
  
          <div class="config_menu__area2">
            <div id="proportionalConfig" class="disabled">
              <label for="pixelRatio">Pixel Size</label><input type="number" id="pixelRatio" min="1" value="5"/>
            </div>
      
            <div id="pixelSizeConfig">
              <label for="pixelHeight">Height</label><input type="number" id="pixelHeight" min="1" value="5"/>
              <label for="pixelWidth">Width</label><input type="number" id="pixelWidth" min="1" value="5"/>
            </div>  

          </div> 
      </div>      
        
    </div>
      
      <canvas id="c">If you can read this message, than your browser doesn't support this feature(canvas).</canvas>
      
  </div>
  
  
  <script src="webgl-utils.js"></script>
  <script src="index.js"></script>
</body>
</html>